

<!DOCTYPE HTML>
<html>
<head>
  <meta charset="utf-8">
  <script type="text/javascript" src="http://tajs.qq.com/stats?sId=44218032" charset="UTF-8"></script>
  <script>
	var _hmt = _hmt || [];
	(function() {
	  var hm = document.createElement("script");
	  hm.src = "//hm.baidu.com/hm.js?74dbbfc4a69dc7b0b442194618141042";
	  var s = document.getElementsByTagName("script")[0]; 
	  s.parentNode.insertBefore(hm, s);
	})();
	</script>
  
  <title>iOS高级编程规范 | 钰雪博客</title>
  <meta name="author" content="朱洪伟">
  
  <meta name="description" content="钰雪研发技术博客">
  
  
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  <meta property="og:title" content="iOS高级编程规范"/>
  <meta property="og:site_name" content="钰雪博客"/>

  
    <meta property="og:image" content="undefined"/>
  

  <link href="/imgs/favicon.png" rel="icon" type="image/x-ico">
  <link rel="alternate" href="/atom.xml" title="钰雪博客" type="application/atom+xml">
  <link rel="stylesheet" href="/css/style.css" media="screen" type="text/css">
  <!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
  <script src="//libs.baidu.com/jquery/1.8.0/jquery.min.js"></script>

</head>


<body>
  <header><div>
		
			<div id="imglogo">
				<a href="/"><img src="/imgs/logo.png" alt="钰雪博客" title="钰雪博客"/></a>
			</div>
			
			<div id="textlogo">
				<h1 class="site-name">钰雪博客</h1>
				<h2 class="blog-motto">合抱之木，生于毫末;百丈之台，起于垒土;千里之行，始于足下.</h2>
			</div>
			<nav class="animated">
				<ul>
					
						<li><a href="/">首页</a></li>
					
						<li><a href="/archives">目录</a></li>
					
						<li><a href="/about">关于</a></li>
					
					<li> <a href="/atom.xml">RSS</a> </li>
				</ul>
			</nav>
</div>
</header>
  <div id="content" class="inner">
    <div id="main-col" class="alignleft"><div id="wrapper"><article class="post">
  
    <div class="gallery">
  <div class="photoset">
    
      <img src="">
    
  </div>
  <div class="control">
    <div class="prev"></div>
    <div class="next"></div>
  </div>
</div>
  
  <div class="post-content">
    <header class="article-info clearfix">
  <h1 itemprop="name">
	iOS高级编程规范
  </h1>
  <p class="article-author">By
    
      <a href="http://yoursite.com" title="朱洪伟">朱洪伟</a>
    </p>
  <p class="article-time">
    <time datetime="2015-09-17T09:56:25.000Z" itemprop="datePublished">2015年09月17</time>
    更新日期:<time datetime="2015-09-21T09:31:43.000Z" itemprop="dateModified">2015年09月21</time>
    
  </p>
</header>
    <div class="entry">
		
        <hr>
<h1 id="iOS高级编程规范">iOS高级编程规范</h1><ul>
<li><a href="#1">iOS架构设计与分层</a> </li>
<li><ul>
<li><a href="#1.1">项目工程目录MVC架构</a> </li>
</ul>
</li>
<li><a href="#2">iOS命名规则</a> </li>
<li><ul>
<li><a href="#2.1">代码命名基础知识</a> </li>
</ul>
</li>
<li><ul>
<li><a href="#2.2">代码命名原则</a> </li>
</ul>
</li>
<li><ul>
<li><a href="#2.3">前缀</a> </li>
</ul>
</li>
<li><ul>
<li><a href="#2.4">书写约定</a> </li>
</ul>
</li>
<li><ul>
<li><a href="#2.5">类和协议的名称</a> </li>
</ul>
</li>
<li><ul>
<li><a href="#2.6">头文件</a> </li>
</ul>
</li>
<li><ul>
<li><a href="#2.7">命名方法</a> </li>
</ul>
</li>
<li><ul>
<li><ul>
<li><a href="#2.8">方法的参数</a> </li>
</ul>
</li>
</ul>
</li>
<li><ul>
<li><ul>
<li><a href="#2.9">委托方法</a> </li>
</ul>
</li>
</ul>
</li>
<li><ul>
<li><ul>
<li><a href="#3.0">集合方法</a> </li>
</ul>
</li>
</ul>
</li>
<li><ul>
<li><ul>
<li><a href="#3.1">getter和setter方法（ Accessor Methods ）</a> </li>
</ul>
</li>
</ul>
</li>
<li><ul>
<li><ul>
<li><a href="#3.2">私有方法</a> </li>
</ul>
</li>
</ul>
</li>
<li><ul>
<li><ul>
<li><a href="#3.3">函数</a> </li>
</ul>
</li>
</ul>
</li>
<li><ul>
<li><ul>
<li><a href="#2.7">命名方法</a> </li>
</ul>
</li>
</ul>
</li>
<li><ul>
<li><ul>
<li><a href="#2.8">方法的参数</a> </li>
</ul>
</li>
</ul>
</li>
<li><ul>
<li><ul>
<li><a href="#2.9">委托方法</a> </li>
</ul>
</li>
</ul>
</li>
<li><ul>
<li><ul>
<li><a href="#3.0">集合方法</a> </li>
</ul>
</li>
</ul>
</li>
<li><ul>
<li><a href="#A1">声明属性和实例变量</a></li>
</ul>
</li>
<li><ul>
<li><ul>
<li><a href="#A1.1">Property</a> </li>
</ul>
</li>
</ul>
</li>
<li><ul>
<li><ul>
<li><a href="#A1.2">实例变量</a> </li>
</ul>
</li>
</ul>
</li>
<li><ul>
<li><a href="#A2">常量</a> </li>
</ul>
</li>
<li><ul>
<li><ul>
<li><a href="#A2.1">枚举常量</a> </li>
</ul>
</li>
</ul>
</li>
<li><ul>
<li><ul>
<li><a href="#A2.2">使用const创建的常量</a></li>
</ul>
</li>
</ul>
</li>
<li><ul>
<li><ul>
<li><a href="#A2.3">其他类型的常量</a> </li>
</ul>
</li>
</ul>
</li>
<li><ul>
<li><a href="#A3">通知和异常</a> </li>
</ul>
</li>
<li><ul>
<li><ul>
<li><a href="#A3.1">通知</a></li>
</ul>
</li>
</ul>
</li>
<li><ul>
<li><ul>
<li><a href="#A3.2">异常</a> </li>
</ul>
</li>
</ul>
</li>
<li><ul>
<li><a href="#A3.3">ios缩写</a></li>
</ul>
</li>
<li><a href="#A4">iOS代码规范</a></li>
<li><ul>
<li><a href="#A4.1">代码书写格式</a></li>
</ul>
</li>
<li><ul>
<li><a href="#A4.2">每一行的最大长度</a></li>
</ul>
</li>
<li><ul>
<li><a href="#A4.3">书写断行</a></li>
</ul>
</li>
<li><ul>
<li><a href="#A4.4">函数调用</a></li>
</ul>
</li>
<li><ul>
<li><a href="#A4.5">@public 和 @private 标记符</a></li>
</ul>
</li>
<li><ul>
<li><a href="#A4.6">预编译常量/宏</a></li>
</ul>
</li>
<li><ul>
<li><a href="#A4.7">枚举类型</a></li>
</ul>
</li>
<li><ul>
<li><a href="#A4.8">布尔值</a></li>
</ul>
</li>
<li><ul>
<li><a href="#A4.9">条件语句</a></li>
</ul>
</li>
<li><ul>
<li><a href="#A5.0">三元操作符（条件判断语句）</a></li>
</ul>
</li>
<li><ul>
<li><a href="#A5.1">Init方法</a></li>
</ul>
</li>
<li><ul>
<li><a href="#A5.2">类构造方法</a></li>
</ul>
</li>
<li><ul>
<li><a href="#A5.3">CGRect函数</a></li>
</ul>
</li>
<li><ul>
<li><a href="#A5.4">错误处理</a></li>
</ul>
</li>
<li><ul>
<li><a href="#A5.5">下划线</a></li>
</ul>
</li>
<li><ul>
<li><a href="#A5.6">协议（ Protocols ）</a></li>
</ul>
</li>
<li><ul>
<li><a href="#A5.7">闭包（ Blocks ）</a></li>
</ul>
</li>
<li><ul>
<li><a href="#A5.8">代码组织</a></li>
</ul>
</li>
<li><ul>
<li><a href="#A5.9">单例模式</a></li>
</ul>
</li>
<li><a href="#6">注释规范</a></li>
<li><ul>
<li><a href="#6.1">头文件注释</a></li>
</ul>
</li>
<li><ul>
<li><a href="#6.2">类注释</a></li>
</ul>
</li>
<li><ul>
<li><a href="#6.3">属性注释</a></li>
</ul>
</li>
<li><ul>
<li><a href="#6.4">函数(方法)注释</a></li>
</ul>
</li>
<li><ul>
<li><a href="#6.5">枚举注释</a></li>
</ul>
</li>
<li><ul>
<li><a href="#6.6">协议注释</a></li>
</ul>
</li>
<li><ul>
<li><a href="#6.7">委托注释</a></li>
</ul>
</li>
<li><a href="#7">项目管理工具（git，SVN）使用</a></li>
<li><a href="#8">iOS研发更多参考资料：</a></li>
</ul>
<p>===<br>标签（空格分隔）： 项目结构 命名规范 编码习惯  代码注释</p>
<hr>
<h1 id="iOS架构设计与分层"><a name="1" id="1">iOS架构设计与分层</a></h1><p>架构的几个原则，根据优先次序高低排列：</p>
<pre><code><span class="number">1.</span>（逻辑）拆分越细越好
<span class="number">2.</span> 依赖关细越少越好 
<span class="number">3.</span> 交互越少越好 ... （交互是指项目中页面逻辑跳转并非交互设计）        
</code></pre><p>这样做有如下几点好处：</p>
<ul>
<li>对于大中型软件，层次越多，每一层就更单纯，更容易维护。</li>
<li>团队成员只需了解一小部分业务，就能顺利进行开发。</li>
<li>相对底层的模块，可以更好的重用。</li>
<li>层次分的越多，开发者对抽象的理解就更深入。</li>
</ul>
<hr>
<h2 id="项目工程目录MVC架构"><a name="1.1" id="1.1">项目工程目录MVC架构</a></h2><ul>
<li>建立Request文件夹，存放网络请求</li>
<li>建立Model工程<br>   DataSource对于数据的抽象，不需要知道它是从网络、数据库还是缓存中得到的。<pre><code>存放数据存储管理类
网络请求解析封装类
</code></pre></li>
<li>建立Libs（Library）文件夹，存放第三方库</li>
<li>建立Tools文件夹，存放自己封装的类库<br>   通常在Tools文件下还会分为<br>   扩展（categories）类与<br>   自定义封装类</li>
<li>建立Constant文件，放在底层目录，用于<br>   存放常量,<br>   宏定义文件,<br>   全局单例等</li>
<li>建立Views文件夹，分TableCell,与工程View<br>  存放列表Cell,item,<br>  工程所需View</li>
<li>建立BaseViewController，放在底层公共目录</li>
<li>建立ViewControllers文件夹，存放所有的ViewControl<br>  每个Controller页面同样可有对应的管理文件</li>
<li><p>在SupportingFiles文件夹下建立</p>
<pre><code>Images、Music和Video等相关文件夹，
 分别存放图片、
 音频、
 视频等资源。
</code></pre><p>示例：<br><img src="http://192.168.0.102:7000/iOS/iOS/uploads/636a2cd2527fb139a2f3f13aef27093f/7FF1AB8C-023A-4416-8715-FC60CF03085D.png" alt="Drawing" height="400"></p>
</li>
</ul>
<hr>
<h1 id="iOS命名规则"><a name="2" id="2">iOS命名规则</a></h1><h2 id="代码命名基础知识"><a name="2.1" id="2.1">代码命名基础知识</a></h2><p><strong><a href="https://developer.apple.com/library/mac/documentation/Cocoa/Conceptual/CodingGuidelines/Articles/NamingBasics.html#//apple_ref/doc/uid/20001281-BBCHBFAH" target="_blank" rel="external">苹果官方问的命名规范</a></strong></p>
<p><strong>命名规范</strong></p>
<p>1、类名、协议名：遵循大驼峰命名法；<br>2、常量：这里的常量指的是宏(#define)、枚举(enum)、常量(const)等，使用小写”k“作为前缀，名称遵循大驼峰命名法。<br>3、方法</p>
<ul>
<li>方法名和方法参数遵循相同的规则，使用小写开头的小驼峰法；</li>
<li>方法名和参数尽量读起来像是一句话；</li>
<li>方法名不允许使用“get“前缀；</li>
<li>-或+与返回类型间留一个空格，但参数列表之间不要留间隔；</li>
<li>如果参数过多，推荐每个参数各占一行；<br>4、变量：<br>类成员变量，属性，局部变量，使用小写开头的小驼峰法，其中类成员变量在名称最后加一个下划线，比如:myLovalVariable, myInstanceVariable_ ；变量名的名称尽量可以推测其用途，具有描述性。<br>例如：</li>
</ul>
<figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">-</span> (void)<span class="tag">doSomethingWithString</span>:(NSString *)<span class="tag">theString</span>(NSInteger *)<span class="tag">theInteger</span> &#123;   ...   &#125; ;</span><br></pre></td></tr></table></figure>
<p>示例：</p>
<h2 id="代码命名原则"><a name="2.2" id="2.2">代码命名原则</a></h2><p>####1.1 清晰<br>尽量清晰又简洁，无法两全时清晰更重要<br>例如：</p>
<p><img src="http://192.168.0.102:7000/iOS/iOS/uploads/2f80d70d2c4252bb4785ad1b9f80b12d/General_Principles1.png" alt="Drawing" height="200"></p>
<p>通常不应缩写名称，即使方法名很长也应完整拼写</p>
<p>你可能认为某个缩写众所周知，但其实未必，特别是你周围的开发者语言文化背景不同时<br>有一些历史悠久的缩写还是可以使用的</p>
<p><img src="http://192.168.0.102:7000/iOS/iOS/uploads/7f116869a01b33e563f181382ee966f4/General_Principles2.png" alt="Drawing" height="300"></p>
<p>API命名避免歧义，例如一个方法名有多种理解</p>
<p><img src="http://192.168.0.102:7000/iOS/iOS/uploads/daf6a6e7c8ad9ab3ff9aec319cf690de/link.png" alt="Drawing"></p>
<p>####1.2一致</p>
<p>尽力保持Cocoa编程接口命名一致<br>如果有疑惑，请浏览当前头文件或者参考文档<br>当某个类的方法使用了多态时，一致性尤其重要<br>不同类里，功能相同的方法命名也应相同</p>
<p><img src="http://192.168.0.102:7000/iOS/iOS/uploads/b154d7caa1f0b8e7e725db1877a95c03/link-2.png" alt="Drawing"></p>
<p>####1.3 避免自引用（self Reference）</p>
<p>命名不应自引用<br>这里的自引用指的是在词尾引用自身</p>
<p><img src="http://192.168.0.102:7000/iOS/iOS/uploads/06276ba0ee8c941eb8efde6cce503375/link-3.png" alt="Drawing"></p>
<p>Mask与Notification忽略此规则</p>
<p><img src="http://192.168.0.102:7000/iOS/iOS/uploads/4b5e7b0f26ef45a6b52bdeb14a26b252/link-4.png" alt="Drawing"></p>
<h2 id="前缀"><a name="2.3" id="2.3">前缀</a></h2><p>前缀是编程接口命名的重要部分，它们区分了软件的不同功能区域：</p>
<p>前缀可以防止第三方开发者与Apple的命名冲突<br>同样可以防止Apple内部的命名冲突<br>前缀有指定格式<br>它由二到三个大写字母组成，不使用下划线和子前缀<br>命名类、协议、函数、常量和typedef结构体时使用前缀<br>方法名不使用前缀（因为它存在于特定类的命名空间中）<br>结构体字段不使用前缀<br><img src="http://192.168.0.102:7000/iOS/iOS/uploads/75794c02c178c30e379755cbed2469ef/Prefixes.png" alt="Drawing"></p>
<h2 id="书写约定"><a name="2.4" id="2.4">书写约定</a></h2><p>在命名API元素时， 使用驼峰命名法（如runTheWordsTogether），并注意以下书写约定：</p>
<p>小驼峰命名法(CamelCase):第一个单词小写字母开头，其他单词首字母大写；<br>大驼峰命名法(PascalCase):所有首字母大写。</p>
<p>#####方法名</p>
<p>小写第一个字母，大写之后所有单词的首字母，不使用前缀<br>如果方法名以一个众所周知的大写缩略词开始，该规则不适用</p>
<p>避免使用下划线作为前缀，有意思私人的方法名（使用下划线字符作为一个实例变量名称的前缀是允许的） 。苹果公司保留使用这种约定。由第三方使用可能会导致命名空间冲突;他们可能会无意中覆盖现有的私有方法有一个属于自己的类，这会具有灾难性的后果。查看约定私有方法的建议，遵循私有API 。<br>如：</p>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">fileExistsAtPath:</span><span class="string">isDirectory:</span></span><br></pre></td></tr></table></figure>
<p>对于函数和常量的名称，使用相同的前缀相关类和大写的​​单词首字母。</p>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">NSRunAlertPanel</span></span><br><span class="line"><span class="built_in">NSCellDisabled</span></span><br></pre></td></tr></table></figure>
<p>####标点符号<br>由多个单词组成的名称，别使用标点符号作为名称的一部分<br>分隔符（下划线、破折号等）也不能使用<br>避免使用下划线作为私有方法的前缀，Apple保留这一方式的使用<br>强行使用可能会导致命名冲突，即Apple已有的方法被覆盖，这会导致灾难性后果<br>实例变量使用下划线作为前缀还是允许的</p>
<h2 id="类和协议的名称"><a name="2.5" id="2.5">类和协议的名称</a></h2><p>class</p>
<p>class的名称应该包含一个名词，用以表明这个类是什么（或者做了什么），并拥有合适的前缀<br>如NSString、NSDate、NSScanner、UIApplication、UIButton</p>
<p>不关联class的protocol</p>
<p>大多数protocol聚集了一堆相关方法，并不关联class<br>这种protocol使用ing形式以和class区分开来</p>
<p><img src="http://192.168.0.102:7000/iOS/iOS/uploads/c940e72fa65be20b237e9e62ff193863/link-6.png" alt="Drawing"></p>
<p>关联class的protocol</p>
<p>一些protoco聚集了一堆无关方法，并试图与某个class关联在一起，由这个class来主导<br>这种protocol与class同名<br>如NSObject protocol</p>
<h2 id="头文件"><a name="2.6" id="2.6">头文件</a></h2><p>头文件的命名极其重要，因为它可以指出头文件包含的内容：</p>
<p>声明一个孤立的class或protocol<br>将声明放入单独的文件<br>使头文件名与声明的class/protocol相同</p>
<p><img src="http://192.168.0.102:7000/iOS/iOS/uploads/1cbbd16b788f47476100b105b5616d42/headerFile.png" alt="Drawing"></p>
<p>声明关联的class或protocol<br>将关联的声明（class/category/protocol）放入同一个头文件<br>头文件名与主要的class/category/protocol相同</p>
<p>图中能 NSString 包含了NSString 和NSMutableString Classes<br>      NSLock.h 包含NSLocking protocol 和NSLock，NSConditionLock，NSrecursiveLock Classes<br><img src="http://192.168.0.102:7000/iOS/iOS/uploads/4a9bc6226f8c686a9b8a7f9c423c3bdb/headerFile1.png" alt="Drawing" width="600"></p>
<p>Framework头文件<br>每个framework都应该有一个同名头文件<br>Include了框架内其他所有头文件</p>
<p><img src="http://192.168.0.102:7000/iOS/iOS/uploads/1a4284f3baf9625c1d40e6a54a9d2d07/headerFile2.png" alt="Drawing" width="600"></p>
<p>添加API到另一个framework<br>如果要在一个framework中为另一个framework的class catetgory添加方法，加上单词“Additions”<br>如Application Kit的NSBundleAdditions.h 文件<br>关联的函数、数据类型<br>如果你有一组关联的函数、常量、结构体或其他数据类型，将它们放到一个名字合适的头文件中<br>如Application Kit的NSGraphics.h</p>
<h2 id="命名方法"><a name="2.7" id="2.7">命名方法</a></h2><p>####1.通用原则</p>
<p>以小写字母开始，之后单词的首字母大写<br>以众所周知的缩写开始可以大写，如TIFF、PDF<br>私有方法可以加前缀<br>如果方法代表对象接收的动作，以动词开始<br>不要使用 do 或 does 作为名字的一部分，因为助动词在这里很少有实际意义<br>同样的，也别在动词之前使用副词和形容词<br>如果方法表示让对象执行一个动作，使用动词打头来命名，注意不要使用 do ， does 这 种多余的关键字，动词本身的暗示就足够了：</p>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 动词打头的方法表示让对象执行一个动作</span></span><br><span class="line">- (<span class="typename">void</span>)<span class="string">invokeWithTarget:</span>(id)target;</span><br><span class="line">- (<span class="typename">void</span>)<span class="string">selectTabViewItem:</span>(NSTabViewItem *)tabViewItem;</span><br></pre></td></tr></table></figure>
<p>如果方法是为了获取对象的一个属性值，直接用属性名称来命名这个方法，注意不要添加 get 或者其他的动词前缀：</p>
<p>应该，使用属性名来命名方法</p>
<figure class="highlight lisp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">- <span class="list">(<span class="keyword">NSSize</span>)</span>cellSize<span class="comment">;</span></span><br></pre></td></tr></table></figure>
<p>不应该，添加了多余的动词前缀</p>
<figure class="highlight lisp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">- <span class="list">(<span class="keyword">NSSize</span>)</span>calcCellSize<span class="comment">;</span></span><br><span class="line">- <span class="list">(<span class="keyword">NSSize</span>)</span>getCellSize<span class="comment">;</span></span><br></pre></td></tr></table></figure>
<p>对于有多个参数的方法，务必在每一个参数前都添加关键词，关键词应当清晰说明参数的作用</p>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 应该，保证每个参数都有关键词修饰</span></span><br><span class="line">- (<span class="typename">void</span>)<span class="string">sendAction:</span>(SEL)aSelector <span class="string">toObject:</span>(id)anObject <span class="string">forAllCells:</span>(BOOL)flag;</span><br><span class="line"><span class="comment">// 不应该，遗漏关键词</span></span><br><span class="line">- (<span class="typename">void</span>)<span class="string">sendAction:</span>(SEL)<span class="string">aSelector :</span>(id)<span class="string">anObject :</span>(BOOL)flag;</span><br><span class="line"><span class="comment">// 应该</span></span><br><span class="line">- (id)<span class="string">viewWithTag:</span>(NSInteger)aTag;</span><br><span class="line"><span class="comment">// 不应该，关键词的作用不清晰</span></span><br><span class="line">- (id)<span class="string">taggedView:</span>(<span class="typename">int</span>)aTag;</span><br></pre></td></tr></table></figure>
<p>不要用 and 来连接两个参数，通常 and 用来表示方法执行了两个相对独立的操作（从设计上来说，这时候应</p>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 应该，不要使用 "and" 来连接参数</span></span><br><span class="line">- (<span class="keyword">int</span>)runModalForDirectory:(<span class="built_in">NSString</span> *)path andFile:(<span class="built_in">NSString</span> *)name andTypes:(<span class="built_in">NSArray</span> *)fileTypes;</span><br><span class="line"><span class="comment">// 不应该，使用 "and" 来表示两个相对独立的操作</span></span><br><span class="line">- (<span class="built_in">BOOL</span>)openFile:(<span class="built_in">NSString</span> *)fullPath withApplication:(<span class="built_in">NSString</span> *)appName andDeactivate:(<span class="built_in">BOOL</span>)flag;</span><br></pre></td></tr></table></figure>
<h2 id="方法的参数"><a name="2.8" id="2.8">方法的参数</a></h2><p>方法的参数命名也有一些需要注意的地方 :</p>
<ul>
<li>和方法名类似，参数的第一个字母小写，后面的每一个单词首字母大写</li>
<li>不要再方法名中使用类似 pointer,ptr这样的字眼去表示指针，参数本身的类型足以说明</li>
<li>不要使用只有一两个字母的参数名</li>
<li>不要使用简写，拼出完整的单词</li>
<li><p>下面列举了一些常用参数名：</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">..<span class="class">.action</span>:(SEL)aSelector</span><br><span class="line">..<span class="class">.alignment</span>:(int)mode</span><br><span class="line">..<span class="class">.atIndex</span>:(int)index</span><br><span class="line">..<span class="class">.content</span>:(NSRect)aRect</span><br><span class="line">..<span class="class">.doubleValue</span>:(double)aDouble</span><br><span class="line">..<span class="class">.floatValue</span>:(<span class="attribute">float</span>)aFloat</span><br><span class="line">..<span class="class">.font</span>:(NSFont *)fontObj</span><br><span class="line">..<span class="class">.frame</span>:(NSRect)frameRect</span><br><span class="line">..<span class="class">.intValue</span>:(int)anInt</span><br><span class="line">..<span class="class">.keyEquivalent</span>:(NSString *)charCode</span><br><span class="line">..<span class="class">.length</span>:(int)numBytes</span><br><span class="line">..<span class="class">.point</span>:(NSPoint)aPoint</span><br><span class="line">..<span class="class">.stringValue</span>:(NSString *)aString</span><br><span class="line">..<span class="class">.tag</span>:(int)anInt</span><br><span class="line">..<span class="class">.target</span>:(id)anObject</span><br><span class="line">..<span class="class">.title</span>:(NSString *)aString</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="委托方法"><a name="2.9" id="2.9">委托方法</a></h2><p>委托方法 (或委派方法) 是指那些对象调用在其委托 (如果委托实现他们) 发生某些事件时。他们有一种独特的形式，这同样适用于调用对象的数据源中的方法: 开始通过确定发送消息的对象的类的名称:<br>省略了前缀的类名和首字母小写</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">-</span> (<span class="tag">BOOL</span>)<span class="rule"><span class="attribute">tableView</span>:<span class="value">(NSTableView *)tableView shouldSelectRow:(int)row</span></span>;</span><br><span class="line"><span class="tag">-</span> (<span class="tag">BOOL</span>)<span class="rule"><span class="attribute">application</span>:<span class="value">(NSApplication *)sender openFile:(NSString *)filename</span></span>;</span><br></pre></td></tr></table></figure>
<p>类名称省略前缀，第一个字母是小写。<br>除非该方法仅有一个参数，发件人一个冒号被贴的类别名称 (参数对委托对象的引用)。</p>
<p>以发送消息的对象开始的规则不适用下列两种情况<br>只有一个sender参数的方法</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">-</span> (<span class="tag">BOOL</span>)<span class="rule"><span class="attribute">applicationOpenUntitledFile</span>:<span class="value">(NSApplication *)sender</span></span>;</span><br></pre></td></tr></table></figure>
<p>响应notification的方法（方法的唯一参数就是notification）</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">-</span> (<span class="tag">void</span>)<span class="rule"><span class="attribute">windowDidChangeScreen</span>:<span class="value">(NSNotification *)notification</span></span>;</span><br></pre></td></tr></table></figure>
<p>使用单词 did 和 will 来通知delegate<br>“did”will”用于调用以通知委托，<br>did 表示某些事已发生<br>will 表示某些事将要发生</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">-</span> (<span class="tag">void</span>)<span class="rule"><span class="attribute">browserDidScroll</span>:<span class="value">(NSBrowser *)sender</span></span>;</span><br><span class="line"><span class="tag">-</span> (<span class="tag">NSUndoManager</span> *)<span class="rule"><span class="attribute">windowWillReturnUndoManager</span>:<span class="value">(NSWindow *)window</span></span>;</span><br></pre></td></tr></table></figure>
<p>虽然您可以使用”did”或”will”方法被调用时，要问要做代表另一个对象的委托，”should”是首选。</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">-</span> (<span class="tag">BOOL</span>)<span class="rule"><span class="attribute">windowShouldClose</span>:<span class="value">(id)sender</span></span>;</span><br></pre></td></tr></table></figure>
<p>询问delegate是否可以执行某个行为时可以使用 did 或 will，不过 should 更完美</p>
<h2 id="集合方法"><a name="3.0" id="3.0">集合方法</a></h2><p>为了管理集合中的元素，集合应该有这几个方法</p>
<ul>
<li><p>(void)addElement:(elementType)anObj;</p>
</li>
<li><p>(void)removeElement:(elementType)anObj;</p>
</li>
<li><p>(NSArray *)elements;</p>
</li>
</ul>
<p>例如：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">-</span> (<span class="tag">void</span>)<span class="rule"><span class="attribute">addLayoutManager</span>:<span class="value">(NSLayoutManager *)obj</span></span>;</span><br><span class="line"><span class="tag">-</span> (<span class="tag">void</span>)<span class="rule"><span class="attribute">removeLayoutManager</span>:<span class="value">(NSLayoutManager *)obj</span></span>;</span><br><span class="line"><span class="tag">-</span> (<span class="tag">NSArray</span> *)<span class="tag">layoutManagers</span>;</span><br></pre></td></tr></table></figure>
<p>如果集合是无序的，返回一个NSSet比NSarray更好</p>
<p>如果需要在集合中的特定位置插入元素，使用类似下面的方法</p>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">- (<span class="typename">void</span>)<span class="string">insertLayoutManager:</span>(NSLayoutManager *)obj <span class="string">atIndex:</span>(<span class="typename">int</span>)index;</span><br><span class="line">- (<span class="typename">void</span>)<span class="string">removeLayoutManagerAtIndex:</span>(<span class="typename">int</span>)index;</span><br></pre></td></tr></table></figure>
<p>有对与的实现细节要牢记集合方法: 这些方法通常意味着插入对象的所有权，因此添加或插入他们的代码必须保留它们，并删除他们的代码也必须释放他们。<br>如果插入的对象需要有指针恢复为主要对象，你这样做 (通常) 一套…方法设置回指针，但不会保留。在 insertLayoutManager:atIndex: NSLayoutManager 类的方法，就是这样在这些方法中:</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">-</span> (<span class="tag">void</span>)<span class="rule"><span class="attribute">setTextStorage</span>:<span class="value">(NSTextStorage *)textStorage</span></span>;</span><br><span class="line"><span class="tag">-</span> (<span class="tag">NSTextStorage</span> *)<span class="tag">textStorage</span>;</span><br></pre></td></tr></table></figure>
<p>你通常不会将 setTextStorage: 直接，但可能要重写它。<br>收集方法的上述约定的另一个例子来自 NSWindow 类:</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">-</span> (<span class="tag">void</span>)<span class="rule"><span class="attribute">addChildWindow</span>:<span class="value">(NSWindow *)childWin ordered:(NSWindowOrderingMode)place</span></span>;</span><br><span class="line"><span class="tag">-</span> (<span class="tag">void</span>)<span class="rule"><span class="attribute">removeChildWindow</span>:<span class="value">(NSWindow *)childWin</span></span>;</span><br><span class="line"><span class="tag">-</span> (<span class="tag">NSArray</span> *)<span class="tag">childWindows</span>;</span><br><span class="line"><span class="tag">-</span> (<span class="tag">NSWindow</span> *)<span class="tag">parentWindow</span>;</span><br><span class="line"><span class="tag">-</span> (<span class="tag">void</span>)<span class="rule"><span class="attribute">setParentWindow</span>:<span class="value">(NSWindow *)window</span></span>;</span><br></pre></td></tr></table></figure>
<h2 id="getter和setter方法（_Accessor_Methods_）"><a name="3.1" id="3.1">getter和setter方法（ Accessor Methods ）</a></h2><p>getter和setter方法是指用来获取和设置类属性值的方法，属性的不同类型，对应着不同的存取方法规范：</p>
<figure class="highlight haml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 属性是一个名词时的存取方法范式</span></span><br><span class="line">-<span class="ruby"> (type)noun;</span><br><span class="line"></span>-<span class="ruby"> (void)<span class="symbol">setNoun:</span>(type)aNoun;</span><br><span class="line"></span><span class="comment">// 例子</span></span><br><span class="line">-<span class="ruby"> (<span class="constant">NSString</span> *)title;</span><br><span class="line"></span>-<span class="ruby"> (void)<span class="symbol">setTitle:</span>(<span class="constant">NSString</span> *)aTitle;</span><br><span class="line"></span><span class="comment">// 属性是一个形容词时存取方法的范式</span></span><br><span class="line">-<span class="ruby"> (<span class="constant">NSString</span> *)title;</span><br><span class="line"></span>-<span class="ruby"> (void)<span class="symbol">setTitle:</span>(<span class="constant">NSString</span> *)aTitle;</span><br><span class="line"></span><span class="comment">// 例子</span></span><br><span class="line">-<span class="ruby"> (<span class="constant">BOOL</span>)isAdjective;</span><br><span class="line"></span>-<span class="ruby"> (void)<span class="symbol">setAdjective:</span>(<span class="constant">BOOL</span>)flag;</span><br><span class="line"></span><span class="comment">// 属性是一个动词时存取方法的范式</span></span><br><span class="line">-<span class="ruby"> (<span class="constant">BOOL</span>)verbObject;</span><br><span class="line"></span>-<span class="ruby"> (void)<span class="symbol">setVerbObject:</span>(<span class="constant">BOOL</span>)flag;</span><br><span class="line"></span><span class="comment">// 例子</span></span><br><span class="line">-<span class="ruby"> (<span class="constant">BOOL</span>)showsAlpha;</span><br><span class="line"></span>-<span class="ruby"> (void)<span class="symbol">setShowsAlpha:</span>(<span class="constant">BOOL</span>)flag;</span></span><br></pre></td></tr></table></figure>
<p>getter和setter方法时不要将动词转化为被动形式来使用：</p>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 正确</span></span><br><span class="line">- (<span class="keyword">void</span>)setAcceptsGlyphInfo:(<span class="built_in">BOOL</span>)flag;</span><br><span class="line">- (<span class="built_in">BOOL</span>)acceptsGlyphInfo;</span><br><span class="line"><span class="comment">// 错误，不要使用动词的被动形式</span></span><br><span class="line">- (<span class="keyword">void</span>)setGlyphInfoAccepted:(<span class="built_in">BOOL</span>)flag;</span><br><span class="line">- (<span class="built_in">BOOL</span>)glyphInfoAccepted;</span><br></pre></td></tr></table></figure>
<h2 id="私有方法"><a name="3.2" id="3.2">私有方法</a></h2><p>不要使用下划线作为私有方法的前缀，Apple保留这一使用方式</p>
<p>因为若是你的私有方法名已被Apple使用，覆盖它将会产生极难追踪的BUG</p>
<p>如果继承自大型Cocoa框架（如UIView），请确保子类的私有方法名与父类不一样</p>
<p>可以为私有方法加一个前缀，如公司名或项目名：XX_</p>
<p>例如你的项目叫做Byte Flogger，那么前缀可能是：BF_addObject</p>
<p>总之，为子类的私有方法添加前缀是为了不覆盖其父类的私有方法</p>
<h2 id="函数"><a name="3.3" id="3.3">函数</a></h2><p>函数的命名类似方法，但有两点要注意</p>
<p>你使用的类和常量拥有相同的前缀<br>前缀后的首字母大写</p>
<p>许多函数名以描述其作用的动词开始</p>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">NSHighlightRect</span></span><br><span class="line"><span class="built_in">NSDeallocateObjec</span></span><br></pre></td></tr></table></figure>
<p>查询属性的函数有进一步的命名规则</p>
<p>如果函数返回首个参数的属性，省略动词</p>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">unsigned</span> <span class="keyword">int</span> <span class="built_in">NSEventMaskFromType</span>(<span class="built_in">NSEventType</span> type)</span><br><span class="line"><span class="keyword">float</span> <span class="built_in">NSHeight</span>(<span class="built_in">NSRect</span> aRect)</span><br></pre></td></tr></table></figure>
<p>如果通过reference返回了值，使用 “Get”</p>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="keyword">char</span> *<span class="built_in">NSGetSizeAndAlignment</span>(<span class="keyword">const</span> <span class="keyword">char</span> *typePtr, <span class="keyword">unsigned</span> <span class="keyword">int</span> *sizep, <span class="keyword">unsigned</span> <span class="keyword">int</span> *alignp)</span><br></pre></td></tr></table></figure>
<p>如果返回的是boolean值，应该灵活使用动词</p>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">BOOL</span> <span class="built_in">NSDecimalIsNotANumber</span>(<span class="keyword">const</span> <span class="built_in">NSDecimal</span> *decimal)</span><br></pre></td></tr></table></figure>
<h2 id="声明属性和实例变量"><a name="A1" id="A1">声明属性和实例变量</a></h2><p>###<a name="A1.1" id="A1.1">Property</a></p>
<p>Property命名规则与第二章accessor methods一样（因为两者紧密联系）</p>
<p>如果property表示为一个名词或动词，格式如下</p>
<p>@property (…) 类型 名词/动词 ;</p>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">@property</span> (<span class="keyword">strong</span>) <span class="built_in">NSString</span> *title;</span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">assign</span>) <span class="built_in">BOOL</span> showsAlpha;</span><br></pre></td></tr></table></figure>
<p>如果property表示为一个形容词</p>
<p>可省略 ”is” 前缀<br>但要指定getter方法的惯用名称</p>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">@property</span> (<span class="keyword">assign</span>, getter=isEditable) <span class="built_in">BOOL</span> editable;</span><br></pre></td></tr></table></figure>
<p>###<a name="A1.2" id="A1.2">实例变量</a></p>
<p>通常不应该直接访问实例变量</p>
<p>init、dealloc、accessor methods等方法内部例外</p>
<p>实例变量以下划线 “_” 开始</p>
<p>确保实例变量描述了所存储的属性</p>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">@implementation</span> <span class="title">MyClass</span> </span>&#123;</span><br><span class="line"><span class="built_in">BOOL</span> _showsTitle;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>如果想要修改property的实例变量名，使用 @synthesize语句</p>
<figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">@implementation</span> MyClass</span><br><span class="line"><span class="variable">@synthesize</span> showsTitle=_showsTitle;</span><br></pre></td></tr></table></figure>
<p>为一个class添加实例变量时，有几点需要注意：</p>
<p>避免声明公有实例变量<br>开发者关注的应该是对象接口，而不是其数据细节<br>你可以通过使用property来避免声明实例变量<br>如果需要声明实例变量，指定关键字@private 或 @protected<br>如果你希望子类可以直接访问某个实例变量，使用 @protected 关键字<br>如果一个实例变量是某个类可访问的属性，确保写了accessor methods<br>如果有可能，还是使用property</p>
<h2 id="常量"><a name="A2" id="A2">常量</a></h2><h2 id="枚举常量"><a name="A2.1" id="A2.1">枚举常量</a></h2><p>使用枚举来关联一组integer常量</p>
<p>枚举常量和typedef遵循函数的命名规范，下面的例子是 NSMatrix.h</p>
<figure class="highlight crystal"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">typedef <span class="class"><span class="keyword">enum</span> <span class="title">_NSMatrixMode</span> &#123;</span></span><br><span class="line"><span class="constant">NSRadioModeMatrix</span> = <span class="number">0</span>,</span><br><span class="line"><span class="constant">NSHighlightModeMatrix</span> = <span class="number">1</span>,</span><br><span class="line"><span class="constant">NSListModeMatrix</span> = <span class="number">2</span>,</span><br><span class="line"><span class="constant">NSTrackModeMatrix</span> = <span class="number">3</span></span><br><span class="line">&#125; <span class="constant">NSMatrixMode</span>;</span><br></pre></td></tr></table></figure>
<p>Typedef 标记 (在上述示例中的 _NSMatrixMode) 是不必要的注意。<br>你可以为bit masks之类的东西创建一个匿名枚举</p>
<figure class="highlight crystal"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">enum</span> &#123;</span></span><br><span class="line"><span class="constant">NSBorderlessWindowMask</span> = <span class="number">0</span>,</span><br><span class="line"><span class="constant">NSTitledWindowMask</span> = <span class="number">1</span> &lt;&lt; <span class="number">0</span>,</span><br><span class="line"><span class="constant">NSClosableWindowMask</span> = <span class="number">1</span> &lt;&lt; <span class="number">1</span>,</span><br><span class="line"><span class="constant">NSMiniaturizableWindowMask</span> = <span class="number">1</span> &lt;&lt; <span class="number">2</span>,</span><br><span class="line"><span class="constant">NSResizableWindowMask</span> = <span class="number">1</span> &lt;&lt; <span class="number">3</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h2 id="使用const创建的常量"><a name="A2.2" id="A2.2">使用const创建的常量</a></h2><p>使用const关键字的常量</p>
<p>使用const关键字来创建一个float常量</p>
<p>你可以使用const关键字来创建一个与其他常量不相关的integer常量，否则，使用枚举</p>
<p>使用const关键字的常量也遵循函数的命名规则</p>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="keyword">float</span> <span class="built_in">NSLightGray</span>;</span><br></pre></td></tr></table></figure>
<h2 id="其他类型的常量"><a name="A2.3" id="A2.3">其他类型的常量</a></h2><p>通常不应使用 #define 预编译指令来创建常量<br>integer常量，使用枚举<br>float常量，使用 const 修饰符<br>对 #define 预编译指令，大写所有字母<br>比如 DEBUG 判断</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="preprocessor">#<span class="keyword">ifdef</span> DEBUG</span></span><br></pre></td></tr></table></figure>
<p>注意的时，cocoa官网宏 字首和字尾都有双下划线</p>
<figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="strong">__MACH__</span></span><br></pre></td></tr></table></figure>
<p>定义NSString常量来作为Notification和Key值<br>这样做可以有效防止拼写错误</p>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">APPKIT_EXTERN <span class="built_in">NSString</span> *<span class="built_in">NSPrintCopies</span>;</span><br></pre></td></tr></table></figure>
<h2 id="通知和异常"><a name="A3" id="A3">通知和异常</a></h2><h2 id="通知"><a name="A3.1" id="A3.1">通知</a></h2><p>Notification的格式</p>
<p>类/头文件名+进行状态+通知名称+Notification</p>
<figure class="highlight accesslog"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">[Name of associated class]</span> + <span class="string">[Did | Will]</span> + <span class="string">[UniquePartOfName]</span> + Notification</span><br></pre></td></tr></table></figure>
<p>如：</p>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">NSApplicationDidBecomeActiveNotification</span></span><br><span class="line"><span class="built_in">NSWindowDidMiniaturizeNotification</span></span><br><span class="line"><span class="built_in">NSTextViewDidChangeSelectionNotification</span></span><br><span class="line"><span class="built_in">NSColorPanelColorDidChangeNotificatio</span></span><br></pre></td></tr></table></figure>
<h2 id="异常"><a name="A3.2" id="A3.2">异常</a></h2><p>异常格式</p>
<p>头+定义名称+Exception</p>
<figure class="highlight accesslog"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">[Prefix]</span> + <span class="string">[UniquePartOfName]</span> + Exception</span><br></pre></td></tr></table></figure>
<p>例如</p>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">NSColorListIOException</span></span><br><span class="line"><span class="built_in">NSColorListNotEditableException</span></span><br><span class="line"><span class="built_in">NSDraggingException</span></span><br><span class="line"><span class="built_in">NSFontUnavailableException</span></span><br><span class="line"><span class="built_in">NSIllegalSelectorException</span></span><br></pre></td></tr></table></figure>
<h2 id="ios缩写"><a name="A3.3" id="A3.3">ios缩写</a></h2><h1 id="iOS代码规范"><a name="A4" id="A4">iOS代码规范</a></h1><h2 id="指针_“_*_”_号的位置"> 指针 “ * ” 号的位置</h2><p>如：</p>
<figure class="highlight dns"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">NSString *varName<span class="comment">;</span></span><br></pre></td></tr></table></figure>
<h2 id="代码书写格式"><a name="A4.1" id="A4.1">代码书写格式</a></h2><ul>
<li>使用空格而不是制表符 Tab<br>不要在工程里使用 Tab 键，使用空格来进行缩进。在 Xcode &gt; Preferences &gt; Text Editing 将 Tab 和自动缩进都设置为 2 个空格。（Google 的标准是使用两个空格来缩进，但这里还是推荐使用 Xcode 默认的设置。）</li>
</ul>
<p>方法大括号和其他大括号(if/else/switch/while 等.)总是在同一行语句打开但在新行中关闭。</p>
<figure class="highlight autoit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">应该</span><br><span class="line"><span class="keyword">if</span> (user.isHappy) &#123;  </span><br><span class="line">    //<span class="keyword">Do</span> something  </span><br><span class="line">&#125; <span class="keyword">else</span> &#123;  </span><br><span class="line">    //<span class="keyword">Do</span> something <span class="keyword">else</span>  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight autoit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">不应该：</span><br><span class="line"><span class="keyword">if</span> (user.isHappy)  </span><br><span class="line">&#123;  </span><br><span class="line">  //<span class="keyword">Do</span> something  </span><br><span class="line">&#125;  </span><br><span class="line"><span class="keyword">else</span> &#123;  </span><br><span class="line">  //<span class="keyword">Do</span> something <span class="keyword">else</span>  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>在方法之间应该有且只有一行，这样有利于在视觉上更清晰和更易于组织。在方法内的空白应该分离功能，但通常都抽离出来成为一个新方法。<br>优先使用auto-synthesis。但如果有必要，@synthesize和@dynamic应该在实现中每个都声明新的一行。<br>应该避免以冒号对齐的方式来调用方法。因为有时方法签名可能有3个以上的冒号和冒号对齐会使代码更加易读。请不要这样做，尽管冒号对齐的方法包含代码块，因为Xcode的对齐方式令它难以辨认。</p>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">应该</span><br><span class="line"><span class="comment">// blocks are easily readable  </span></span><br><span class="line">[UIView <span class="string">animateWithDuration:</span><span class="number">1.0</span> <span class="string">animations:</span>^&#123;  </span><br><span class="line">  <span class="comment">// something  </span></span><br><span class="line">&#125; <span class="string">completion:</span>^(BOOL finished) &#123;  </span><br><span class="line">  <span class="comment">// something  </span></span><br><span class="line">&#125;];</span><br></pre></td></tr></table></figure>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">不应该</span><br><span class="line"><span class="comment">// colon-aligning makes the block indentation hard to read  </span></span><br><span class="line">[<span class="built_in">UIView</span> animateWithDuration:<span class="number">1.0</span>  </span><br><span class="line">                 animations:^&#123;  </span><br><span class="line">                     <span class="comment">// something  </span></span><br><span class="line">                 &#125;  </span><br><span class="line">                 completion:^(<span class="built_in">BOOL</span> finished) &#123;  </span><br><span class="line">                     <span class="comment">// something  </span></span><br><span class="line">                 &#125;];</span><br></pre></td></tr></table></figure>
<h2 id="每一行的最大长度"><a name="A4.2" id="A4.2">每一行的最大长度</a></h2><p>  在 Xcode &gt; Preferences &gt; Text Editing &gt; Page guide at column: 中将最大行长设置为80，过长的一行代码将会导致可读性问题。<br>   参考图：<br>    <img src="http://192.168.0.102:7000/iOS/iOS/uploads/2379c1d6f6e288127f4c338b82e9442f/2EDA2C84-6E08-4CDC-AC8C-337F73CF7F79.png" alt="架构"></p>
<h2 id="书写断行"><a name="A4.3" id="A4.3">书写断行</a></h2><p>一个典型的 Objective-C 函数应该是这样的：</p>
<figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">-</span> (void)<span class="tag">writeVideoFrameWithData</span>:(NSData*)<span class="tag">frameData</span> <span class="tag">timeStamp</span>:(int)<span class="tag">timeStamp</span> &#123;</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>在 - 和 (void) 之间应该有一个空格，第一个大括号 { 的位置在函数所在行的末尾，同样应该有一个空格。（我司的 C 语言规范要求是第一个大括号单独占一行，但考虑到 OC 较长的函数名和苹果 SDK 代码的风格，还是将大括号放在行末。）</p>
<p>如果一个函数有特别多的参数或者名称很长，应该将其按照 : 来对齐分行显示:</p>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">-(id)<span class="string">initWithModel:</span>(IPCModle)model</span><br><span class="line">     <span class="string">connectType  :</span>(IPCConnectType)connectType</span><br><span class="line">     <span class="string">resolution   :</span>(IPCResolution)resolution</span><br><span class="line">     <span class="string">authName     :</span>(NSString *)authName</span><br><span class="line">     <span class="string">password     :</span>(NSString *)password</span><br><span class="line">/Animate the icon   </span><br><span class="line">animationTimer = [[NSTimer <span class="string">scheduledTimerWithTimeInterval:</span>ANIMATION_DELAY</span><br><span class="line"><span class="label">                        target:</span>self</span><br><span class="line"><span class="label">                      selector:</span><span class="annotation">@selector</span>(<span class="string">animateIcon:</span>)</span><br><span class="line"><span class="label">                      userInfo:</span>nil</span><br><span class="line"><span class="label">                       repeats:</span>YES] retain];  </span><br><span class="line"><span class="keyword">if</span> (some_long_condition &amp;&amp;</span><br><span class="line">    some_other_long_condition ||</span><br><span class="line">    some_completely_different_long_condition)</span><br></pre></td></tr></table></figure>
<p>如果方法名比参数名短，每个参数占用一行，至少缩进4个字符，且为垂直对齐（而非使用冒号对齐）。如：</p>
<figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">-</span> (void)<span class="tag">short</span>:(GTMFoo *)<span class="tag">theFoo</span></span><br><span class="line">    <span class="tag">longKeyword</span>:(NSRect)<span class="tag">theRect</span></span><br><span class="line">    <span class="tag">evenLongerKeyword</span>:(float) <span class="tag">theInterval</span> &#123;</span><br><span class="line">        ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="函数调用"><a name="A4.4" id="A4.4">函数调用</a></h2><p>函数调用的格式和书写差不多，可以按照函数的长短来选择写在一行或者分成多行：</p>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 写在一行</span></span><br><span class="line">[myObject <span class="string">doFooWith:</span>arg1 <span class="string">name:</span>arg2 <span class="string">error:</span>arg3];</span><br><span class="line"><span class="comment">// 分行写，按照 ':' 对齐</span></span><br><span class="line">[myObject <span class="string">doFooWith:</span>arg1</span><br><span class="line"><span class="label">               name:</span>arg2</span><br><span class="line"><span class="label">              error:</span>arg3];</span><br><span class="line"><span class="comment">// 和方法的声明一样，如果无法使用冒号对齐时，每个参数一行、缩进4个字符、垂直对其（而非使用冒号对齐）。如：</span></span><br><span class="line">[myObj <span class="string">short:</span>arg1</span><br><span class="line"><span class="string">longKeyword:</span>arg2</span><br><span class="line"><span class="string">evenLongerKeyword:</span>arg3</span><br><span class="line"><span class="string">error:</span>arg4];</span><br></pre></td></tr></table></figure>
<p>以下写法是错误的：</p>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 错误，要么写在一行，要么全部分行</span></span><br><span class="line">[myObject <span class="string">doFooWith:</span>arg1 <span class="string">name:</span>arg2</span><br><span class="line"><span class="string">error:</span>arg3];</span><br><span class="line">[myObject <span class="string">doFooWith:</span>arg1</span><br><span class="line"><span class="string">name:</span>arg2 <span class="string">error:</span>arg3];</span><br><span class="line"><span class="comment">// 错误，按照 ':' 来对齐，而不是关键字</span></span><br><span class="line">[myObject <span class="string">doFooWith:</span>arg1</span><br><span class="line"><span class="string">name:</span>arg2</span><br><span class="line"><span class="string">error:</span>arg3];</span><br></pre></td></tr></table></figure>
<h2 id="@public_和_@private_标记符"><a name="A4.5" id="A4.5">@public 和 @private 标记符</a></h2><p>@public 和 @private 标记符应该以一个空格来进行缩进：</p>
<figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">@interface</span> <span class="attribute">MyClass </span>: NSObject &#123;</span><br><span class="line"> <span class="variable">@public</span></span><br><span class="line">    ...</span><br><span class="line"> <span class="variable">@private</span></span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br><span class="line"><span class="variable">@end</span></span><br></pre></td></tr></table></figure>
<h2 id="预编译常量/宏"><a name="A4.6" id="A4.6">预编译常量/宏</a></h2><p>和ANSI C类似, 预编译定义必须全部大写。</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="hexcolor">#def</span>ine MAX_ENTRIES <span class="number">20</span>  </span><br><span class="line"><span class="id">#ifdef</span>  ENABLE_BINDINGS_SUPPORT</span><br></pre></td></tr></table></figure>
<p>常量是容易重复被使用和无需通过查找和代替就能快速修改值。常量应该使用static来声明而不是使用#define，除非显式地使用宏。整形常数用枚举，浮点型常数用const修饰 。 </p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">应该</span><br><span class="line"><span class="keyword">static</span> NSString * <span class="keyword">const</span> RWTAboutViewControllerCompanyName = @<span class="string">"RayWenderlich.com"</span>;  </span><br><span class="line"><span class="keyword">static</span> CGFloat <span class="keyword">const</span> RWTImageThumbnailHeight = <span class="number">50.0</span>;  </span><br><span class="line">不应该</span><br><span class="line"><span class="preprocessor">#<span class="keyword">define</span> CompanyName @<span class="string">"RayWenderlich.com"</span>  </span></span><br><span class="line"><span class="preprocessor">#<span class="keyword">define</span> thumbnailHeight <span class="number">2</span></span></span><br></pre></td></tr></table></figure>
<p>注意由编译器定义的宏，有前后各俩个下划线 。例如：<strong>MACH</strong>；</p>
<h2 id="枚举类型/宏"><a name="A4.7" id="A4.7">枚举类型/宏</a></h2><p>当使用enum时，推荐使用新的固定基本类型规格，因为它有更强的类型检查和代码补全。现在SDK有一个宏NS_ENUM()来帮助和鼓励你使用固定的基本类型。</p>
<p>例如</p>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">typedef</span> <span class="built_in">NS_ENUM</span>(<span class="built_in">NSInteger</span>, RWTLeftMenuTopItemType) &#123;  </span><br><span class="line">  RWTLeftMenuTopItemMain,  </span><br><span class="line">  RWTLeftMenuTopItemShows,  </span><br><span class="line">  RWTLeftMenuTopItemSchedule  </span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>你也可以显式地赋值(展示旧的k-style常量定义)：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">typedef NS_ENUM(NSInteger, RWTGlobalConstants) &#123;  </span><br><span class="line">  RWTP<span class="keyword">in</span>SizeM<span class="keyword">in</span> = <span class="number">1</span>,  </span><br><span class="line">  RWTP<span class="keyword">in</span>SizeMax = <span class="number">5</span>,  </span><br><span class="line">  RWTP<span class="keyword">in</span>CountM<span class="keyword">in</span> = <span class="number">100</span>,  </span><br><span class="line">  RWTP<span class="keyword">in</span>CountMax = <span class="number">500</span>,  </span><br><span class="line">&#125;; </span><br><span class="line">``` </span><br><span class="line"></span><br><span class="line">旧的k-style常量定义应该避免除非编写Core Foundation C的代码。</span><br><span class="line">不应该：</span><br></pre></td></tr></table></figure>
<p>enum GlobalConstants {<br>  kMaxPinSize = 5,<br>  kMaxPinCount = 500,<br>};<br><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="header">Case语句</span><br><span class="line">--</span></span><br><span class="line">大括号在case语句中并不是必须的，除非编译器强制要求。当一个case语句包含多行代码时，大括号应该加上。</span><br></pre></td></tr></table></figure></p>
<p>switch (condition) {<br>  case 1:<br>    // …<br>    break;<br>  case 2: {<br>    // …<br>    // Multi-line example using braces<br>    break;<br>  }<br>  case 3:<br>    // …<br>    break;<br>  default:<br>    // …<br>    break;<br>}<br><figure class="highlight actionscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">有很多次，当相同代码被多个cases使用时，一个fall-through应该被使用。一个fall-through就是在<span class="keyword">case</span>最后移除<span class="string">'break'</span>语句，这样就能够允许执行流程跳转到下一个<span class="keyword">case</span>值。为了代码更加清晰，一个fall-through需要注释一下。</span><br></pre></td></tr></table></figure></p>
<p>switch (condition) {<br>  case 1:<br>    // <strong> fall-through! </strong><br>  case 2:<br>    // code executed for values 1 and 2<br>    break;<br>  default:<br>    // …<br>    break;<br>}<br>当在switch使用枚举类型时，’default’是不需要的。<br>例如：<br>RWTLeftMenuTopItemType menuType = RWTLeftMenuTopItemMain;<br>switch (menuType) {<br>  case RWTLeftMenuTopItemMain:<br>    // …<br>    break;<br>  case RWTLeftMenuTopItemShows:<br>    // …<br>    break;<br>  case RWTLeftMenuTopItemSchedule:<br>    // …<br>    break;<br>}<br><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="header">&lt;a name="A4.8" id="A4.8"&gt;布尔值&lt;/a&gt;</span><br><span class="line">---</span></span><br><span class="line"></span><br><span class="line">Objective-C使用YES和NO。因为true和false应该只在CoreFoundation，C或C++代码使用。既然nil解析成NO，所以没有必要在条件语句比较。不要拿某样东西直接与YES比较，因为YES被定义为1和一个BOOL能被设置为8位。</span><br><span class="line"></span><br><span class="line">这是为了在不同文件保持一致性和在视觉上更加简洁而考虑。</span><br><span class="line">应该</span><br></pre></td></tr></table></figure></p>
<p>if (someObject) {}<br>if (![anotherObject boolValue]) {}<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">不应该</span><br></pre></td></tr></table></figure></p>
<p>if (someObject == nil) {}<br>if ([anotherObject boolValue] == NO) {}<br>if (isAwesome == YES) {} // Never do this.<br>if (isAwesome == true) {} // Never do this.<br><figure class="highlight actionscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">如果BOOL属性的名字是一个形容词，属性就能忽略<span class="string">"is"</span>前缀，但要指定<span class="keyword">get</span>访问器的惯用名称。例如：</span><br></pre></td></tr></table></figure></p>
<p>@property (assign, getter=isEditable) BOOL editable;<br><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="header">&lt;a name="A4.9" id="A4.9"&gt;条件语句&lt;/a&gt;</span><br><span class="line">---</span></span><br><span class="line">条件语句主体为了防止出错应该使用大括号包围，即使条件语句主体能够不用大括号编写(如，只用一行代码)。这些错误包括添加第二行代码和期望它成为if语句；还有，even more dangerous defect可能发生在if语句里面一行代码被注释了，然后下一行代码不知不觉地成为if语句的一部分。除此之外，这种风格与其他条件语句的风格保持一致，所以更加容易阅读。</span><br><span class="line">应该</span><br></pre></td></tr></table></figure></p>
<p>if (!error) {<br>  return success;<br>}<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">不应该</span><br></pre></td></tr></table></figure></p>
<p>if (!error)<br>  return success;<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">或</span><br></pre></td></tr></table></figure></p>
<p>if (!error) return success;<br><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="header">&lt;a name="A5.0" id="A5.0"&gt;三元操作符（条件判断语句）&lt;/a&gt;</span><br><span class="line">---</span></span><br><span class="line"></span><br><span class="line">当需要提高代码的清晰性和简洁性时，三元操作符?:才会使用。单个条件求值常常需要它。多个条件求值时，如果使用if语句或重构成实例变量时，代码会更加易读。一般来说，最好使用三元操作符是在根据条件来赋值的情况下。</span><br><span class="line"></span><br><span class="line">Non-boolean的变量与某东西比较，加上括号()会提高可读性。如果被比较的变量是boolean类型，那么就不需要括号。</span><br><span class="line">应该</span><br></pre></td></tr></table></figure></p>
<p>NSInteger value = 5;<br>result = (value != 0) ? x : y;<br>BOOL isHorizontal = YES;<br>result = isHorizontal ? x : y;<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">不应该</span><br></pre></td></tr></table></figure></p>
<p>result = a &gt; b ? x = c &gt; d ? c : d : y;<br><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="header">&lt;a name="A5.1" id="A5.1"&gt;Init方法&lt;/a&gt;</span><br><span class="line">---</span></span><br><span class="line">在初始化方法中,不要将变量初始化为“0”或“nil”,那是多余的</span><br><span class="line">内存中所有的新创建的对象(isa除外)都是0,所以不需要重复初始化为“0”或“nil”</span><br><span class="line"></span><br><span class="line">Init方法应该遵循Apple生成代码模板的命名规则，返回类型应该使用instancetype而不是id。</span><br></pre></td></tr></table></figure></p>
<ul>
<li>(instancetype)init {<br>self = [super init];<br>if (self) {<br>  // …<br>}<br>return self;<br>}  <figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="header">&lt;a name="A5.2" id="A5.2"&gt;类构造方法&lt;/a&gt;</span><br><span class="line">---</span></span><br><span class="line">当类构造方法被使用时，它应该返回类型是instancetype而不是id。这样确保编译器正确地推断结果类型。[<span class="link_label">参考资料</span>][<span class="link_reference">3</span>]</span><br><span class="line"></span><br><span class="line">代码更加一致，可读性更强。它们返回相同的东西，这一点一目了然。</span><br><span class="line">应该</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>1 ：<br>@interface Airplane  </p>
<ul>
<li>(instancetype)airplaneWithType:(RWTAirplaneType)type;<br>@end<br>2：</li>
</ul>
<ul>
<li>(instancetype)initWithBar:(NSInteger)bar;<br>3：</li>
</ul>
<ul>
<li>(instancetype)fooWithBar:(NSInteger)bar;<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">不应该</span><br></pre></td></tr></table></figure>
</li>
</ul>
<ul>
<li>(id)initWithBar:(NSInteger)bar;</li>
</ul>
<ul>
<li>(id)fooWithBar:(NSInteger)bar;<figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="header">&lt;a name="A5.3" id="A5.3"&gt;CGRect函数&lt;/a&gt;</span><br><span class="line">---</span></span><br><span class="line">当访问CGRect里的x, y, width, 或 height时，应该使用CGGeometry函数而不是直接通过结构体来访问。引用Apple的CGGeometry</span><br><span class="line"></span><br><span class="line">官方介绍</span><br><span class="line">在这个参考文档中所有的函数，接受CGRect结构体作为输入，在计算它们结果时隐式地标准化这些rectangles。因此，你的应用程序应该避免直接访问和修改保存在CGRect数据结构中的数据。相反，使用这些函数来操纵rectangles和获取它们的特性。</span><br><span class="line"></span><br><span class="line">应该</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>CGRect frame = self.view.frame;<br>CGFloat x = CGRectGetMinX(frame);<br>CGFloat y = CGRectGetMinY(frame);<br>CGFloat width = CGRectGetWidth(frame);<br>CGFloat height = CGRectGetHeight(frame);<br>CGRect frame = CGRectMake(0.0, 0.0, width, height);<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">不应该</span><br></pre></td></tr></table></figure></p>
<p>CGRect frame = self.view.frame;<br>CGFloat x = frame.origin.x;<br>CGFloat y = frame.origin.y;<br>CGFloat width = frame.size.width;<br>CGFloat height = frame.size.height;<br>CGRect frame = (CGRect){ .origin = CGPointZero, .size = frame.size }; </p>
<figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="header">&lt;a name="A5.4" id="A5.4"&gt;错误处理&lt;/a&gt;</span><br><span class="line">---</span></span><br><span class="line">当方法通过引用来返回一个错误参数，判断返回值而不是错误变量。</span><br><span class="line">应该：</span><br></pre></td></tr></table></figure>
<p>NSError *error;<br>if (![self trySomethingWithError:&amp;error]) {<br>  // Handle Error<br>}<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">不应该</span><br></pre></td></tr></table></figure></p>
<p>NSError *error;<br>[self trySomethingWithError:&amp;error];<br>if (error) {<br>  // Handle Error<br>}<br><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">在成功的情况下，有些Apple的APIs记录垃圾值(garbage values)到错误参数(如果non-NULL)，那么判断错误值会导致false负值和crash。</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">这会防止重复引用造成crashes，或者调用alloc与init造成单例并不唯一</span><br><span class="line"></span><br><span class="line"><span class="header">&lt;a name="A5.5" id="A5.5"&gt;下划线&lt;/a&gt;</span><br><span class="line">---</span></span><br><span class="line">当使用属性时，实例变量应该使用self.来访问和改变。这就意味着所有属性将会视觉效果不同，因为它们前面都有self.。</span><br><span class="line"></span><br><span class="line">但有一个特例：在初始化方法里，实例变量(例如，<span class="emphasis">_variableName)应该直接被使用来避免getters/setters潜在的副作用。</span><br><span class="line"></span><br><span class="line"></span>局部变量不应该包含下划线。</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="header">&lt;a name="A5.6" id="A5.6"&gt;协议（ Protocols ）&lt;/a&gt;</span><br><span class="line">---</span></span><br><span class="line">在书写协议的时候注意用 &lt;&gt; 括起来的协议和类型名之间是没有空格的，比如IPCConnectHandler(), 这个规则适用所有书写协议的地方，包括函数声明、类声明、实例变量等等：</span><br></pre></td></tr></table></figure></p>
<p>@interface MyProtocoledClass : NSObject {<br> @private<br>    id<myfancydelegate> _delegate;<br>}<br>@property (nonatomic,assign)id<myfancydelegate>delegate;<br>//或者写成这样</myfancydelegate></myfancydelegate></p>
<ul>
<li>(void)setDelegate:(id)aDelegate;<br>@end<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">如果类声明中包含多个protocal，每个protocal占用一行，缩进<span class="number">2</span>个字符。如：</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>@interface CustomViewController : ViewController &lt;<br>  AbcDelegate,<br>  DefDelegate</p>
<blockquote>
<p>{<br>    …<br>  }<br><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="header">&lt;a name="A5.7" id="A5.7"&gt;闭包（ Blocks ）&lt;/a&gt;</span><br><span class="line">---</span></span><br><span class="line">根据 block 的长度，有不同的书写规则：</span><br><span class="line">较短的 block 可以写在一行内。如果分行显示的话， block 的右括号 &#125;应该和调用block那行代码的第一个非空字符对齐。</span><br><span class="line">block 内的代码采用 4 个空格 的缩进。</span><br><span class="line">如果 block 过于庞大，应该单独声明成一个变量来使用。</span><br><span class="line">^ 和 ( 之间， ^ 和 &#123; 之间都没有空格，参数列表的右括号 ) 和 &#123; 之间有一个空格。</span><br></pre></td></tr></table></figure></p>
</blockquote>
<p>operation setCompletionBlock:^{ [self onOperationDone]; }];<br>// 分行书写的 block ，内部使用 4 空格缩进<br>    [operation setCompletionBlock:^{<br>    [self.delegate newDataAvailable];<br>}];</p>
<p>// 使用 C 语言 API 调用的 block 遵循同样的书写规则<br>dispatch_async(_fileIOQueue, ^{<br>    NSString* path = [self sessionFilePath];<br>    if (path) {<br>         // …<br>    }<br>});</p>
<p>// 较长的 block 关键字可以缩进后在新行书写，注意 block 的右括号 ‘}’ 和调用 block 那行代码的第一个非空字符对齐<br>[[SessionService sharedService]<br>loadWindowWithCompletionBlock:^(SessionWindow *window) {<br>    if (window) {<br>        [self windowDidLoad:window];<br>    } else {<br>        [self errorLoadingWindow];<br>    }<br>}];</p>
<p>// 较长的 block 参数列表同样可以缩进后在新行书写<br>[[SessionService sharedService]<br>loadWindowWithCompletionBlock:<br>^(SessionWindow *window) {<br>    if (window) {<br>        [self windowDidLoad:window];<br>    } else {<br>        [self errorLoadingWindow];<br>    }<br>}];</p>
<p>// 庞大的 block 应该单独定义成变量使用<br>void (^largeBlock)(void) = ^{<br>    // …<br>};<br>[_operationQueue addOperationWithBlock:largeBlock];</p>
<p>// 在一个调用中使用多个 block ，注意到他们不是像函数那样通过 ‘:’ 对齐的，而是同时进行了 4 个空格的缩进<br>    [myObject doSomethingWith:arg1<br>    firstBlock:^(Foo <em>a) {<br>        // …<br>    }<br>    secondBlock:^(Bar </em>b) {<br>        // …<br>    }];<br><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="header">数据结构的语法</span><br><span class="line">---</span></span><br><span class="line">应该使用可读性更好的语法来构造 NSArray ， NSDictionary 等数据结构，避免使用冗长的 alloc,init 方法。</span><br><span class="line">如果构造代码写在一行，需要在括号两端留有一个空格，使得被构造的元素于与构造语法区分开来：</span><br></pre></td></tr></table></figure></p>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 正确，在语法糖的 "[]" 或者 "&#123;&#125;" 两端留有空格</span></span><br><span class="line"><span class="built_in">NSArray</span> *array = @[ [foo description], <span class="string">@"Another String"</span>, [bar description] ];</span><br><span class="line"><span class="built_in">NSDictionary</span> *dict = @&#123; <span class="built_in">NSForegroundColorAttributeName</span> : [<span class="built_in">NSColor</span> redColor] &#125;;</span><br><span class="line"><span class="comment">// 不正确，不留有空格降低了可读性</span></span><br><span class="line"><span class="built_in">NSArray</span>* array = @[[foo description], [bar description]];</span><br><span class="line"><span class="built_in">NSDictionary</span>* dict = @&#123;<span class="built_in">NSForegroundColorAttributeName</span>: [<span class="built_in">NSColor</span> redColor]&#125;;</span><br></pre></td></tr></table></figure>
<p>如果构造代码不写在一行内，构造元素需要使用两个空格来进行缩进，右括号 ] 或者 } 写在新的一行，并且与调用语法糖那行代码的第一个非空字符对齐：</p>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">NSArray</span> *array = @[</span><br><span class="line"><span class="string">@"This"</span>,</span><br><span class="line"><span class="string">@"is"</span>,</span><br><span class="line"><span class="string">@"an"</span>,</span><br><span class="line"><span class="string">@"array"</span></span><br><span class="line">];</span><br><span class="line"><span class="built_in">NSDictionary</span> *dictionary = @&#123; </span><br><span class="line"><span class="built_in">NSFontAttributeName</span> : </span><br><span class="line">[<span class="built_in">NSFont</span> fontWithName:<span class="string">@"Helvetica-Bold"</span> size:<span class="number">12</span>],</span><br><span class="line"><span class="built_in">NSForegroundColorAttributeName</span> : fontColor</span><br><span class="line"> &#125;;</span><br></pre></td></tr></table></figure>
<p>构造字典时，字典的 Key 和 Value 与中间的冒号 : 都要留有一个空格，多行书写时，也可以将 Value 对齐：</p>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 正确，冒号 ':' 前后留有一个空格</span></span><br><span class="line">NSDictionary *option1 = @&#123;</span><br><span class="line"><span class="string">NSFontAttributeName :</span> [NSFont <span class="string">fontWithName:</span>@<span class="string">"Helvetica-Bold"</span> <span class="string">size:</span><span class="number">12</span>],</span><br><span class="line"><span class="string">NSForegroundColorAttributeName :</span> fontColor</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">// 正确，按照 Value 来对齐</span></span><br><span class="line">NSDictionary *option2 = @&#123;</span><br><span class="line"><span class="string">NSFontAttributeName :</span></span><br><span class="line">[NSFont <span class="string">fontWithName:</span>@<span class="string">"Arial"</span> <span class="string">size:</span><span class="number">12</span>],</span><br><span class="line"><span class="string">NSForegroundColorAttributeName :</span> fontColor</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">// 错误，冒号前应该有一个空格</span></span><br><span class="line">NSDictionary *wrong = @&#123;</span><br><span class="line"><span class="string">AKey:</span> @<span class="string">"b"</span>,</span><br><span class="line"><span class="string">BLongerKey:</span> @<span class="string">"c"</span>,</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">// 错误，每一个元素要么单独成为一行，要么全部写在一行内</span></span><br><span class="line">NSDictionary *alsoWrong= @&#123; <span class="string">AKey :</span> @<span class="string">"a"</span>,</span><br><span class="line"><span class="string">BLongerKey :</span> @<span class="string">"b"</span> &#125;;</span><br><span class="line"><span class="comment">// 错误，在冒号前只能有一个空格，冒号后才可以考虑按照 Value 对齐</span></span><br><span class="line">NSDictionary *stillWrong = @&#123;</span><br><span class="line"><span class="string">AKey :</span> @<span class="string">"b"</span>,</span><br><span class="line"><span class="string">BLongerKey :</span> @<span class="string">"c"</span>,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h2 id="代码组织"><a name="A5.8" id="A5.8">代码组织</a></h2><p>在函数分组和protocol/delegate实现中使用#pragma mark -来分类方法，要遵循以下一般结构：</p>
<figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="id">#pragma</span> <span class="tag">mark</span> <span class="tag">-</span> <span class="tag">Lifecycle</span>  </span><br><span class="line"><span class="tag">-</span> (instancetype)<span class="tag">init</span> &#123;&#125;  </span><br><span class="line"><span class="tag">-</span> (void)<span class="tag">dealloc</span> &#123;&#125;  </span><br><span class="line"><span class="tag">-</span> (void)<span class="tag">viewDidLoad</span> &#123;&#125;  </span><br><span class="line"><span class="tag">-</span> (void)<span class="tag">viewWillAppear</span>:(BOOL)<span class="tag">animated</span> &#123;&#125;  </span><br><span class="line"><span class="tag">-</span> (void)<span class="tag">didReceiveMemoryWarning</span> &#123;&#125;  </span><br><span class="line"><span class="id">#pragma</span> <span class="tag">mark</span> <span class="tag">-</span> <span class="tag">Custom</span> <span class="tag">Accessors</span>  </span><br><span class="line"><span class="tag">-</span> (void)<span class="tag">setCustomProperty</span>:(id)<span class="tag">value</span> &#123;&#125;  </span><br><span class="line"><span class="tag">-</span> (id)<span class="tag">customProperty</span> &#123;&#125;  </span><br><span class="line"><span class="id">#pragma</span> <span class="tag">mark</span> <span class="tag">-</span> <span class="tag">IBActions</span>  </span><br><span class="line"><span class="tag">-</span> (IBAction)<span class="tag">submitData</span>:(id)<span class="tag">sender</span> &#123;&#125;  </span><br><span class="line"><span class="id">#pragma</span> <span class="tag">mark</span> <span class="tag">-</span> <span class="tag">Public</span>  </span><br><span class="line"><span class="tag">-</span> (void)<span class="tag">publicMethod</span> &#123;&#125;  </span><br><span class="line"><span class="id">#pragma</span> <span class="tag">mark</span> <span class="tag">-</span> <span class="tag">Private</span>  </span><br><span class="line"><span class="tag">-</span> (void)<span class="tag">privateMethod</span> &#123;&#125;  </span><br><span class="line"><span class="id">#pragma</span> <span class="tag">mark</span> <span class="tag">-</span> <span class="tag">Protocol</span> <span class="tag">conformance</span>  </span><br><span class="line"><span class="id">#pragma</span> <span class="tag">mark</span> <span class="tag">-</span> <span class="tag">UITextFieldDelegate</span>  </span><br><span class="line"><span class="id">#pragma</span> <span class="tag">mark</span> <span class="tag">-</span> <span class="tag">UITableViewDataSource</span>  </span><br><span class="line"><span class="id">#pragma</span> <span class="tag">mark</span> <span class="tag">-</span> <span class="tag">UITableViewDelegate</span>  </span><br><span class="line"><span class="id">#pragma</span> <span class="tag">mark</span> <span class="tag">-</span> <span class="tag">NSCopying</span>  </span><br><span class="line"><span class="tag">-</span> (id)<span class="tag">copyWithZone</span>:(NSZone *)<span class="tag">zone</span> &#123;&#125;  </span><br><span class="line"><span class="id">#pragma</span> <span class="tag">mark</span> <span class="tag">-</span> <span class="tag">NSObject</span>  </span><br><span class="line"><span class="tag">-</span> (NSString *)<span class="tag">description</span> &#123;&#125;</span><br></pre></td></tr></table></figure>
<h2 id="单例模式"><a name="A5.9" id="A5.9">单例模式</a></h2><p>单例对象应该使用线程安全模式来创建共享实例。<br>标准单例示例</p>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">static</span> AppContext * dataEngineInstance=<span class="literal">nil</span>;</span><br><span class="line">+ (AppContext*)sharedInstance&#123;</span><br><span class="line">    <span class="keyword">static</span> <span class="built_in">dispatch_once_t</span> onceToken;</span><br><span class="line">    <span class="built_in">dispatch_once</span>(&amp;onceToken, ^&#123;</span><br><span class="line">        dataEngineInstance=[[[<span class="keyword">self</span> class] alloc] init];</span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="keyword">return</span> dataEngineInstance;</span><br><span class="line">&#125;</span><br><span class="line">+ (instancetype)allocWithZone:(<span class="built_in">NSZone</span> *)zone&#123;</span><br><span class="line">    <span class="keyword">if</span>(dataEngineInstance==<span class="literal">nil</span>)&#123;</span><br><span class="line">        dataEngineInstance=[<span class="keyword">super</span> allocWithZone:zone];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> dataEngineInstance;</span><br><span class="line">&#125;</span><br><span class="line">-(instancetype)copyWithZone:(<span class="built_in">NSZone</span> *)zone&#123;</span><br><span class="line">    <span class="keyword">return</span> dataEngineInstance;</span><br><span class="line">&#125;</span><br><span class="line">- (instancetype)init&#123;</span><br><span class="line">    <span class="keyword">@synchronized</span>(dataEngineInstance) &#123;</span><br><span class="line">        <span class="keyword">return</span> dataEngineInstance;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> dataEngineInstance;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="注释规范"><a name="6" id="6">注释规范</a></h1><p>每一个文件都必须写文件注释，文件注释通常包含</p>
<ul>
<li>文件所在模块</li>
<li>作者信息</li>
<li>历史版本信息</li>
<li>版权信息</li>
<li>文件包含的内容，作用<br>Xcode注释插件 <a href="https://github.com/onevcat/VVDocumenter-Xcode" target="_blank" rel="external">VVDocumenter-Xcode</a></li>
</ul>
<p>一段良好文件注释的例子:</p>
<figure class="highlight gherkin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">/<span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span></span><br><span class="line">Copyright (C), 2011-2013, Andrew Min Chang</span><br><span class="line">File name: AMCCommonLib.h</span><br><span class="line">Author: Andrew Chang (Zhang Min)</span><br><span class="line">E-mail: LaplaceZhang<span class="comment">@126.com</span></span><br><span class="line">Description:</span><br><span class="line">This file provide some covenient tool in calling library tools. One can easily include</span><br><span class="line">library headers he wants by declaring the corresponding macros.</span><br><span class="line">I hope this file is not only a header, but also a useful Linux library note.</span><br><span class="line">History:</span><br><span class="line">2012-??-??: On about come date around middle of Year 2012, file created as <span class="string">"commonLib.h"</span></span><br><span class="line">2012-08-20: Add shared memory library; add message queue.</span><br><span class="line">2012-08-21: Add socket library (local)</span><br><span class="line">2012-08-22: Add math library</span><br><span class="line">2012-08-23: Add socket library (internet)</span><br><span class="line">2012-08-24: Add daemon function</span><br><span class="line">2012-10-10: Change file name as <span class="string">"AMCCommonLib.h"</span></span><br><span class="line">2012-12-04: Add UDP support in AMC socket library</span><br><span class="line">2013-01-07: Add basic data type such as <span class="string">"sint8_t"</span></span><br><span class="line">2013-01-18: Add CFG_LIB_STR_NUM.</span><br><span class="line">2013-01-22: Add CFG_LIB_TIMER.</span><br><span class="line">2013-01-22: Remove CFG_LIB_DATA_TYPE because there is already AMCDataTypes.h</span><br><span class="line">Copyright information:</span><br><span class="line">This file was intended to be under GPL protocol. However, I may use this library</span><br><span class="line">in my work as I am an employee. <span class="keyword">And</span> my company may require me to keep it secret.</span><br><span class="line">Therefore, this file is neither open source nor under GPL control.</span><br><span class="line"><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span>/</span><br></pre></td></tr></table></figure>
<p>文件注释的格式通常不作要求，能清晰易读就可以了，但在整个工程中风格要统一。</p>
<h2 id="头文件注释"><a name="6" .1="" id="6.1">头文件注释</a></h2><p>header : 头文件基本信息。这个用在每个源代码文件的头文件的最开头。<br>例如:</p>
<figure class="highlight gherkin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">/<span class="keyword">*</span>!</span><br><span class="line"><span class="comment">@header 这里的信息应该与该源代码文件的名字一致</span></span><br><span class="line"><span class="comment">@abstract 关于这个源代码文件的一些基本描述</span></span><br><span class="line"><span class="comment">@author Kevin Wu (作者信息)</span></span><br><span class="line"><span class="comment">@version 1.00 2012/01/20 Creation (此文档的版本信息)</span></span><br><span class="line"><span class="keyword">*</span>/</span><br></pre></td></tr></table></figure>
<h2 id="类注释"><a name="6.2" id="6.2">类注释</a></h2><p> class: 类信息。此注释用在类声明的开头。<br>例如:</p>
<figure class="highlight gherkin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">/<span class="keyword">*</span>!</span><br><span class="line"><span class="comment">@class</span></span><br><span class="line"><span class="comment">@abstract 这里可以写关于这个类的一些描述。</span></span><br><span class="line"><span class="keyword">*</span>/</span><br><span class="line"><span class="comment">@interface MyClass : NSObject &#123;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="属性注释"><a name="6.3" id="6.3">属性注释</a></h2><p>property: property的相关注释。</p>
<figure class="highlight gherkin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">/<span class="keyword">*</span>!</span><br><span class="line"><span class="comment">@property</span></span><br><span class="line"><span class="comment">@abstract 这里可以写关于这个Property的一些基本描述。</span></span><br><span class="line"><span class="keyword">*</span>/</span><br><span class="line"><span class="comment">@property (nonatomic,readonly) NSString *helloDocText_;</span></span><br></pre></td></tr></table></figure>
<p>或者</p>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/** 这里可以写关于这个Property的一些基本描述。 */</span></span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>,<span class="keyword">readonly</span>) <span class="built_in">NSString</span> *helloDocText_;</span><br></pre></td></tr></table></figure>
<p>建议使用第二种方式，这样在类中引用是可以看到当前属性注释信息</p>
<h2 id="函数(方法)注释"><a name="6.4" id="6.4">函数(方法)注释</a></h2><p>method: 函数(方法)的相关注释。<br>例如:</p>
<figure class="highlight nimrod"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">/*!</span><br><span class="line">@<span class="keyword">method</span></span><br><span class="line">@abstract 这里可以写一些关于这个方法的一些简要描述</span><br><span class="line">@discussion 这里可以具体写写这个方法如何使用，注意点之类的。如果你是设计一个抽象类或者一个</span><br><span class="line">共通类给给其他类继承的话，建议在这里具体描述一下怎样使用这个方法。</span><br><span class="line">@param text 文字 (这里把这个方法需要的参数列出来)</span><br><span class="line">@param error 错误参照</span><br><span class="line">@<span class="literal">result</span> 返回结果</span><br><span class="line">*/</span><br><span class="line">- (<span class="type">BOOL</span>)showText:(<span class="type">NSString</span> *)text</span><br><span class="line">           error:(<span class="type">NSError</span> **)error;</span><br></pre></td></tr></table></figure>
<h2 id="枚举注释"><a name="6.5" id="6.5">枚举注释</a></h2><p>enum: enum的相关注释。<br>例如:</p>
<figure class="highlight crystal"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">/*!</span><br><span class="line"><span class="variable">@enum</span></span><br><span class="line"><span class="variable">@abstract</span> 关于这个<span class="class"><span class="keyword">enum</span>的一些基本信息</span></span><br><span class="line"><span class="variable">@constant</span> 枚举变量描述信息</span><br><span class="line"><span class="variable">@constant</span> 枚举变量描述信息</span><br><span class="line">...</span><br><span class="line">*<span class="regexp">/</span><br><span class="line">typedef NS_ENUM(NSInteger, HelloDocEnumDocDemo)&#123;</span><br><span class="line">    HelloDocEnumDocDemoTagNumberPopupView = 100,</span><br><span class="line">    HelloDocEnumDocDemoTagNumberOKButton,</span><br><span class="line">    ...</span><br><span class="line">&#125;;</span></span><br></pre></td></tr></table></figure>
<h2 id="协议注释"><a name="6.6" id="6.6">协议注释</a></h2><p>category: category的相关注释。<br>例如:</p>
<figure class="highlight gherkin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">/<span class="keyword">*</span>!</span><br><span class="line"><span class="comment">@category</span></span><br><span class="line"><span class="comment">@abstract NSString的Category</span></span><br><span class="line"><span class="keyword">*</span>/</span><br><span class="line"><span class="comment">@interface KevinNSString (NSString)</span></span><br></pre></td></tr></table></figure>
<h2 id="委托注释"><a name="6.7" id="6.7">委托注释</a></h2><p>protocol: protocol的相关注释<br>例如:</p>
<figure class="highlight gherkin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">/<span class="keyword">*</span>!</span><br><span class="line"><span class="comment">@protocol</span></span><br><span class="line"><span class="comment">@abstract 这个HelloDoc类的一个protocol</span></span><br><span class="line"><span class="comment">@discussion 具体描述信息可以写在这里</span></span><br><span class="line"><span class="keyword">*</span>/</span><br><span class="line"><span class="comment">@protocol HelloDocDelegate ＜NSObject＞</span></span><br></pre></td></tr></table></figure>
<h1 id="项目管理工具（git，SVN）使用"><a name="7" id="7">项目管理工具（git，SVN）使用</a></h1><p>git 工具</p>
<p>mac 版本：<br>GitHub Desktop</p>
<p>SourceThree</p>
<p>及时更是，多同步管理平台上的代码<br>在ios 项目多人联合开发容易出现代码合并冲突问题，在项目开发上如果添加了新文件或者修改工程设置都会改动 .xcodeproj文件，当修改了工程文件时应及时提交<br>如遇到了代码冲突应该先查看冲突原因再合并。</p>
<h2 id="iOS更多编码规范参考资料参考资料："><a name="8" id="8">iOS更多编码规范参考资料参考资料：</a></h2><p>googol object-c编码规范</p>
<ol>
<li><a href="https://google-styleguide.googlecode.com/svn/trunk/objcguide.xml?showone=Line_Length#Line_Length" target="_blank" rel="external">Google Objective-C Style Guide</a></li>
</ol>
<p>官网 object-c编码规范 </p>
<ol>
<li><a href="https://developer.apple.com/library/mac/documentation/Cocoa/Conceptual/CodingGuidelines/CodingGuidelines.pdf![2EDA2C84-6E08-4CDC-AC8C-337F73CF7F79]" target="_blank" rel="external">Coding Guidelines for Cocoa</a> </li>
</ol>

    </div>
    <footer>
        
  
  <div class="categories">
    <a href="/categories/iOS开发/">iOS开发</a>
  </div>

        
  
  <div class="tags">
    <a href="/tags/iOS/">iOS</a>
  </div>

		<div class="bdsharebuttonbox">
	<a href="#" class="bds_qzone" data-cmd="qzone" title="分享到QQ空间"></a>
	<a href="#" class="bds_tsina" data-cmd="tsina" title="分享到新浪微博"></a>
	<a href="#" class="bds_tqq" data-cmd="tqq" title="分享到腾讯微博"></a>
	<a href="#" class="bds_renren" data-cmd="renren" title="分享到人人网"></a>
	<a href="#" class="bds_weixin" data-cmd="weixin" title="分享到微信"></a>
	<a href="#" class="bds_fbook" data-cmd="fbook" title="分享到Facebook"></a>
	<a href="#" class="bds_twi" data-cmd="twi" title="分享到Twitter"></a>
	<a href="#" class="bds_more" data-cmd="more"></a>
	<a href="#" class="bds_count" data-cmd="count"></a>
</div>
<script>
window._bd_share_config=
{
	"common":{
		"bdSnsKey":{},
		"bdText":"",
		"bdMini":"2",
		"bdMiniList":false,
		"bdPic":"",
		"bdStyle":"0",
		"bdSize":"24"
	},
	"share":{},
	"image":{
		"viewList":["qzone","tsina","tqq","renren","weixin","fbook","twi"],
		"viewText":"分享到：",
		"viewSize":"24"
	},
	"selectShare":{
		"bdContainerClass":null,
		"bdSelectMiniList":["qzone","tsina","tqq","renren","weixin","fbook","twi"]
	}
};
with(document)0[
	(getElementsByTagName('head')[0]||body).appendChild(createElement('script')).src='http://bdimg.share.baidu.com/static/api/js/share.js?v=89860593.js?cdnversion='+~(-new Date()/36e5)
];
</script>    
        <div class="clearfix"></div>
    </footer>
  </div>
</article>

 <nav id="pagination" >
    
    <a href="/2015/09/20/此路不通彼路通/" class="alignleft prev" title="此路不通彼路通">此路不通彼路通</a>
    
    
    <div class="clearfix"></div>
</nav>



	
	<section id="comment">
		<!-- 多说评论框 start -->
		<div class="ds-thread" data-thread-key="2015/09/17/--iOS高级编程规范--/" data-title="iOS高级编程规范" data-url="http://yoursite.com/2015/09/17/--iOS高级编程规范--/"></div>
		<!-- 多说评论框 end -->
		<!-- 多说公共JS代码 start (一个网页只需插入一次) -->
		<script type="text/javascript">
		var duoshuoQuery = {short_name:"zhwios"};
		(function() {
			var ds = document.createElement('script');
			ds.type = 'text/javascript';ds.async = true;
			ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
			ds.charset = 'UTF-8';
			(document.getElementsByTagName('head')[0] 
			 || document.getElementsByTagName('body')[0]).appendChild(ds);
		})();
		</script>
		<!-- 多说公共JS代码 end -->
	</section>
	
</div></div>
    <aside id="sidebar" class="alignright">
  <div class="search">
  <form action="//google.com/search" method="get" accept-charset="utf-8">
    <input type="search" name="q" results="0" placeholder="搜索">
    <input type="hidden" name="q" value="site:yoursite.com">
  </form>
</div>

  
<div class="widget tag">
  <h3 class="title">分类</h3>
  <ul class="entry">
  
    <li><a href="/categories/Objective-C-基础/">Objective-C 基础</a><small>1</small></li>
  
    <li><a href="/categories/iOS开发/">iOS开发</a><small>1</small></li>
  
    <li><a href="/categories/励志/">励志</a><small>1</small></li>
  
    <li><a href="/categories/命令/">命令</a><small>2</small></li>
  
  </ul>
</div>


  
<div class="widget tagcloud">
  <h3 class="title">标签云</h3>
  <div class="entry">
    <a href="/tags/Object-C/" style="font-size: 10px;">Object-C</a> <a href="/tags/git/" style="font-size: 10px;">git</a> <a href="/tags/iOS/" style="font-size: 10px;">iOS</a> <a href="/tags/励志/" style="font-size: 10px;">励志</a>
  </div>
</div>


  
<div class="widget tag">
<h3 class="title">时间线</h3>
<ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/09/">2015年09月 </a><span class="archive-list-count">5</span></li></ul>
</div>


  <div class="widget tag">
<h3 class="title">我的脚印</h3>
<ul class="entry">
<li><a href="http://www.devtang.com" title=" 唐巧技术博客" target="_blank">唐巧技术博客</a></li>
<li><a href="http://blog.csdn.net/v_JULY_v" title="结构之法 算法之道" target="_blank">结构之法 算法之道</a></li>
</ul>
</div>

</aside>
    <div class="clearfix"></div>
  </div>
  <footer id="footer"><div id="footer" >
	
	<div class="line">
		<span></span>
		<div class="author"></div>
	</div>
	
	
	<section class="info">
		<p> 欢迎来到 “钰雪” 技术博客. <br/>
			人必其自爱也,而后人爱诸;人必其自敬也,而后人敬诸</p>
	</section>
	 
	<div class="social-font clearfix">
		
		<a href="http://weibo.com/朱洪伟_" target="_blank" title="weibo"></a>
		
		
		
		<a href="https://github.com/YuXueBJ" target="_blank" title="github"></a>
		
		
		
		
		<a href="mailto:zhwios@126.com" target="_blank" class="icon-email" title="Email Me"></a>
		
	</div>
		<p class="copyright">© 2015
		
		<a href="http://yoursite.com/about" target="_blank" title="朱洪伟">朱洪伟</a>
           <a>技术博客</a>
		
		</p>
</div>
</footer>
  <script src="//libs.baidu.com/jquery/2.0.3/jquery.min.js"></script>
<script src="/js/jquery.imagesloaded.min.js"></script>
<script src="/js/gallery.js"></script>
<script src="/js/counter.js"></script>




<link rel="stylesheet" href="/fancybox/jquery.fancybox.css" media="screen" type="text/css">
<script src="/fancybox/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
(function($){
  $('.fancybox').fancybox();
})(jQuery);
</script>

<div id="totop" style="position:fixed;bottom:100px;right:10px;cursor: pointer;">
<a title="返回顶部"><img src="/imgs/scrollup.png"/></a>
</div>
<script src="/js/totop.js"></script>
<!-- mathjax config similar to math.stackexchange -->

<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    tex2jax: {
      inlineMath: [ ['$','$'], ["\\(","\\)"] ],
      processEscapes: true
    }
  });
</script>

<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      tex2jax: {
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
      }
    });
</script>

<script type="text/x-mathjax-config">
    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for(i=0; i < all.length; i += 1) {
            all[i].SourceElement().parentNode.className += ' has-jax';
        }
    });
</script>

<script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>
</body>
</html>


